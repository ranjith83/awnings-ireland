<div class="workflow-container">
  <form [formGroup]="invoiceForm" class="invoice-form">
    <!-- Select Workflow Section -->
    <div class="form-section">
      <h2 class="section-title">Select Workflow</h2>
      <div class="form-row">
        <div class="form-group workflow-select">
          <select formControlName="workflow" class="form-control">
            <option *ngFor="let workflow of workflows" [value]="workflow.name">
              {{ workflow.name }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- Select Product Section -->
    <div class="form-section">
      <h2 class="section-title">Select Product</h2>
      
      <div class="form-row four-columns">
        <div class="form-group">
          <label>Select Supplier Type</label>
          <select formControlName="supplierType" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let type of supplierTypes" [value]="type.id">
              {{ type.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Select Model</label>
          <select formControlName="model" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let model of models" [value]="model.id">
              {{ model.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Select Awning</label>
          <select formControlName="awning" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let awning of awnings" [value]="awning.id">
              {{ awning.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Widths in cm</label>
          <select formControlName="width" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let width of widths" [value]="width.id">
              {{ width.name }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- Additional Addons Section -->
    <div class="form-section">
      <h2 class="section-title">Additional Addons</h2>
      
      <div class="form-row two-columns">
        <div class="form-group">
          <label>Brackets</label>
          <select formControlName="brackets" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let bracket of brackets" [value]="bracket.id">
              {{ bracket.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Motor</label>
          <select formControlName="motor" class="form-control">
            <option value="">Select</option>
            <option *ngFor="let motor of motors" [value]="motor.id">
              {{ motor.name }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- Installation Fee Section -->
    <div class="form-section">
      <h2 class="section-title">Installation Fee</h2>
      
      <div class="form-row fee-row">
        <div class="form-group">
          <label>Fee</label>
          <input 
            type="text" 
            formControlName="fee" 
            class="form-control"
            placeholder="">
        </div>
        <div class="vat-label">
          <span>{{ vatRate }}% VAT</span>
        </div>
      </div>
    </div>

    <!-- Invoice Table Section -->
    <div class="invoice-table-section">
      <table class="invoice-table">
        <thead>
          <tr>
            <th class="description-col">
              DESCRIPTION
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <path d="M6 3L3 6h6L6 3z"/>
              </svg>
            </th>
            <th>QUANTITY</th>
            <th>UNIT PRICE</th>
            <th>TAX</th>
            <th class="amount-col">
              AMOUNT EUR
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <path d="M6 3L3 6h6L6 3z"/>
              </svg>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of invoiceItems; let i = index" [class.even]="i % 2 === 0">
            <td>{{ item.description }}</td>
            <td class="text-center">{{ item.quantity }}</td>
            <td class="text-center">{{ item.unitPrice }}</td>
            <td class="text-center">{{ item.tax }}%</td>
            <td class="text-right">{{ item.amount }}</td>
          </tr>
        </tbody>
      </table>

      <!-- Totals Section -->
      <div class="totals-section">
        <div class="totals-row">
          <span class="totals-label">Sub Total</span>
          <span class="totals-value">{{ getSubTotal() }}</span>
        </div>
        <div class="totals-row">
          <span class="totals-label">Total Sales TAX {{ vatRate }}%</span>
          <span class="totals-value">{{ getTotalTax() }}</span>
        </div>
        <div class="totals-row total-row">
          <span class="totals-label">Total EUR</span>
          <span class="totals-value">{{ getTotalAmount() }}</span>
        </div>
      </div>

      <!-- Email Checkbox -->
      <div class="email-checkbox">
        <label class="checkbox-label">
          <input 
            type="checkbox"
            formControlName="emailInvoice"
            class="checkbox-input">
          <span>Email Invoice to customer</span>
        </label>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onClose()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M4.646 4.646a.5.5 0 01.708 0L8 7.293l2.646-2.647a.5.5 0 01.708.708L8.707 8l2.647 2.646a.5.5 0 01-.708.708L8 8.707l-2.646 2.647a.5.5 0 01-.708-.708L7.293 8 4.646 5.354a.5.5 0 010-.708z"/>
        </svg>
        Close
      </button>
      <button 
        type="button" 
        class="btn btn-primary" 
        (click)="onGenerateQuote()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 000 2.5v11a.5.5 0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 00.78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0016 13.5v-11a.5.5 0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
        </svg>
        Generate Quote
      </button>
    </div>
  </form>
</div>