<div class="create-quote-container">
  <div class="quote-content">
    <!-- Select Workflow -->
    <div class="form-section">
      <h3 class="section-title">Select Workflow</h3>
      <div class="form-row">
        <div class="form-group full-width">
          <select class="form-select" [(ngModel)]="selectedWorkflowId">
            <option [value]="null" disabled selected>Markilux 990</option>
            <option *ngFor="let workflow of workflows" [value]="workflow.id">
              {{ workflow.name }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- Select Product -->
    <div class="form-section">
      <h3 class="section-title">Select Product</h3>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Select Supplier Type</label>
          <select class="form-select" [(ngModel)]="selectedSupplierId" (change)="onSupplierChange()">
            <option [value]="null" disabled selected>Select</option>
            <option *ngFor="let supplier of suppliers" [value]="supplier.id">
              {{ supplier.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Select Model</label>
          <select class="form-select" [(ngModel)]="selectedModelId" [disabled]="!selectedSupplierId">
            <option [value]="null" disabled selected>Select</option>
            <option *ngFor="let model of models" [value]="model.id">
              {{ model.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Widths in cm</label>
          <select class="form-select" [(ngModel)]="selectedWidthCm">
            <option [value]="null" disabled selected>Select</option>
            <option [value]="300">300</option>
            <option [value]="350">350</option>
            <option [value]="400">400</option>
            <option [value]="450">450</option>
            <option [value]="500">500</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Select Awning</label>
          <select class="form-select" [(ngModel)]="selectedAwning">
            <option value="" disabled selected>Select</option>
            <option value="retractable">Retractable</option>
            <option value="fixed">Fixed</option>
            <option value="freestanding">Freestanding</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Additional Addons -->
    <div class="form-section">
      <h3 class="section-title">Additional Addons</h3>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Brackets</label>
          <select class="form-select" [(ngModel)]="selectedBrackets">
            <option value="" disabled selected>Select</option>
            <option value="standard">Standard</option>
            <option value="heavy-duty">Heavy Duty</option>
            <option value="adjustable">Adjustable</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Arms</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" class="checkbox-input">
              <span>Standard Arms</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Arms</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" class="checkbox-input">
              <span>Extended Arms</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Motor</label>
          <select class="form-select" [(ngModel)]="selectedMotor">
            <option value="" disabled selected>Select</option>
            <option value="somfy">Somfy Radio Controller Motor</option>
            <option value="manual">Manual</option>
            <option value="electric">Electric Standard</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Installation Fee -->
    <div class="form-section">
      <h3 class="section-title">Installation Fee</h3>
      <div class="form-row installation-row">
        <div class="form-group small">
          <label class="form-label">Fee</label>
          <input type="number" class="form-input" [(ngModel)]="installationFee" placeholder="0.00">
        </div>
        <div class="vat-text">{{ vatRate }}% VAT</div>
      </div>
    </div>

    <!-- Quote Items Table -->
    <div class="table-section">
      <table class="quote-table">
        <thead>
          <tr>
            <th class="sortable">
              DESCRIPTION
              <span class="sort-icon">â–²</span>
            </th>
            <th>QUANTITY</th>
            <th>UNIT PRICE</th>
            <th>TAX</th>
            <th>AMOUNT EUR</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of quoteItems; let even = even" [class.even-row]="even">
            <td>{{ item.description }}</td>
            <td>
              <input 
                type="number" 
                class="qty-input" 
                [(ngModel)]="item.quantity"
                (ngModelChange)="onQuantityChange(item)"
                min="1">
            </td>
            <td>{{ item.unitPrice | number:'1.2-2' }}</td>
            <td>{{ item.tax }}%</td>
            <td>{{ item.amount | number:'1.0-0' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Summary Section -->
    <div class="summary-section">
      <div class="summary-left">
        <label class="checkbox-label large">
          <input type="checkbox" class="checkbox-input" [(ngModel)]="emailToCustomer">
          <span>Email Quote to customer</span>
        </label>
        <button class="attach-btn">Attach Brochure with email</button>
      </div>

      <div class="summary-right">
        <div class="summary-row">
          <span class="summary-label">Sub Total</span>
          <span class="summary-value">{{ subtotal | number:'1.0-0' }}</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Total Sales TAX {{ vatRate }}%</span>
          <span class="summary-value">{{ totalTax | number:'1.0-0' }}</span>
        </div>
        <div class="summary-row total">
          <span class="summary-label">Total EUR</span>
          <span class="summary-value">{{ totalAmount | number:'1.0-0' }}</span>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn-close" (click)="close()">
        <span class="close-icon">âœ•</span>
        Close
      </button>
      <button class="btn-generate" (click)="generateQuote()">
        <span class="generate-icon">ðŸ“„</span>
        Generate Quote
      </button>
    </div>
  </div>
  
</div>